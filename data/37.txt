MobiSeg: Interactive Region Segmentation Using Heterogeneous Mobility Data
Wenchao Wu, Yixian Zheng∗Hong Kong University of Science and Technology
Nan Cao†Tongji University
Haipeng Zeng, Bing Ni, Huamin Qu‡Hong Kong University of Science and Technology
Lionel M. Ni§University of Macau
Figure 1: The visualization of region segmentation for Pudong New Area (h) in Shanghai during three time periods generated using MobiSeg:(a) 8-10 am on Monday; (b) 6-8 pm on Monday; (c) 12-2 pm on Sunday. By comparing three segmentation results and embedded activity glyphs, we identified two residential areas (a2, a3) as well as a CBD (a1) with shopping malls (b1) and official blocks (b4). The segmentation results were further verified by comparing to Baidu Street View (d-g).
ABSTRACTWith the acceleration of urbanization and modern civilization, more and more complex regions are formed in urban area. Although un- derstanding these regions could provide huge insights to facilitate valuable applications for urban planning and business intelligence, few methods have been developed to effectively capture the rapid transformation of urban regions. In recent years, the widely applied location-acquisition technologies offer a more effective way to cap- ture the dynamics of a city through analyzing people’s movement activities based on mobility data. However, several challenges ex- ist, including data sparsity and difficulties in result understanding and validation. To tackle these challenges, in this paper, we pro- pose MobiSeg, an interactive visual analytics system, which sup- ports the exploration of people’s movement activities to segment the urban area into regions sharing similar activity patterns. A joint analysis is conducted on three types of heterogeneous mobility data (i.e., taxi trajectories, metro passenger RFID card data, and telco data), which can complement each other and provide a full picture of people’s activities in a region. In addition, advanced analyti- cal algorithms (e.g., non-negative matrix factorization (NMF) based method to capture latent activity patterns, as well as metric learn- ing to calibrate and supervise the underlying analysis) and novel∗E-mail:   {wenchao.wu,  yixian.zheng}@connect.ust.hk†E-mail: nan.cao@gmail.com‡E-mail: {hzengac, nibing, huamin}@cse.ust.hk§E-mail: ni@umac.mo2017 IEEE Pacific Visualization Symposium (PacificVis) 18-21 April, Seoul, Korea978-1-5090-5738-2/17/$31.00 ©2017 IEEE
visualization designs are integrated into our system to provide a comprehensive solution to region segmentation in urban areas. We demonstrate the effectiveness of our system via case studies with real-world datasets and qualitative interviews with domain experts.1    INTRODUCTIONA well developed modern city usually consists of different regions such as residential areas, shopping districts and official blocks, sup- porting different needs of its citizens. To best utilize limited re- sources and resolve urban issues such as traffic congestions, ur- ban planners spend tremendous efforts in planning and construct- ing these regions. However, most of the time, the formation of an urban region cannot be fully controlled, but rather naturally formed by people’s life styles and daily activities. Fortunately, the increas- ing availability of human mobility data generated within urban con- text provides unprecedented opportunities for understanding these spontaneously formed activity-oriented regions (activity region for short) by characterizing people’s movement activities, such as when people move in/out a region and how long they stay. A deeper un- derstanding of these activity regions could enable more precise ur- ban planning and facilitate many valuable applications. Yet despite its importance, little work has been done to capture and understand regional dynamics in a city, which is our focus in this paper.  There has been prior work studying mobility patterns in ur- ban context based on various types of data such as taxi trajectory data [10][11], public transportation data [22][38], mobile phone data [8][33], and social media data [30]. However, none of them can effectively capture the dynamic formation of regions in an ur- ban area. Yuan et al. [37] introduced a technique to segment an ur- ban area into functional regions based on places of interests (POI)
and latent activity trajectories, which is the most relevant technique to our work. However, their method can only produce a static seg- mentation result whose semantics are interpreted merely based on statistics of POI data.  In this paper, we introduce MobiSeg, the first visual analytics system, to the best of our knowledge, designed for capturing the dynamic formation of activity regions by characterizing people’s movement activities (i.e., move in/out, stay). This system deals with heterogeneous mobility data collected from different sources to segment an urban area into regions based on a detailed analysis of people’s movement activity patterns (activity pattern for short) via non-negative matrix factorization (NMF) and supervised cluster analysis. Instead of interpreting the analysis results based on statis- tics of POI data, MobiSeg facilitates an interpretation by showing the results in novel visualization views to leverage users’ domain knowledge and experience. Based on metric learning and interac- tive visualizations, users can supervise the underlying segmentation procedure. In particular, this paper has the following contributions:• Visualization. We propose a novel texture map to visualizeactivity regions and corresponding activity patterns based on voronoi tessellations and stacked elliptical activity glyphs.• Analysis. We introduce an NMF-based method to capture la- tent activity patterns inside a focal area based on heteroge- neous mobility data, and segment the area into activity regions through interactive clustering of local districts with similar ac- tivity patterns based on metric learning.• System. We develop a novel visual analytics system leverag- ing advanced analysis algorithms and visualization techniques to detect activity regions and support an interactive explo- ration from different perspectives.2 RELATED  WORK2.1 Human Mobility Data SourcesWith the increasing availability of location acquisition technolo- gies, human mobility data become ubiquitous within urban context. An extensive amount of efforts has been made to develop effective methods to understand and analyze such kind of data for urban com- puting [39][40]. In this part, we briefly review recent representative work in the field of visualization.  Among various human mobility data, taxi data is one of the most popular data types. For example, Liu et al. [18] analyzed route diversity based on taxi data for route recommendations. Wu et al. [34] used taxi data for exploring a variety of boundaries of a one-hour reachable area in downtown under different traffic condi- tions. Wang et al. [32] presented a visual analytics system for the analysis of patterns in traffic congestions based on taxi trajectories. Apart from taxis, public transportation systems also play an impor- tant role in modern cities. Therefore, data collected from public transportation systems is also frequently used to understand human mobility in an urban area [22][36][38]. For instance, Palomo et al. [22] proposed a visual analytics system, TR-EX, to study sub- way services based on transportation schedules. Zeng et al. [38] looked into interchange patterns to reveal passenger redistribution. In addition, more and more recent researches [8][33] introduced mobile phone data into urban analysis. For example, Di Lorenzo et al. [8] presented AllAboard that analyzed mobile phone data to help city authorities visually explore urban mobility and optimize public transport. Wu et al. [33] developed a visual analytics system, TelCoVis, to explore co-occurrence in human mobility using a type of all-in-one mobile phone data, called telco data. Moreover, there are also a few studies based on other data types, including social media data [5][30] and surveillance videos [21].  However, the analysis results based on human mobility data are usually limited by data quality, which is an important issue pointed out in many studies [5][33]. In particular, taxi and public trans- portation data have limited coverage of population, and these peo- ple usually take taxi or public transportation only a few times a
day, thus making the data very sparse. In contrast, mobile phone data or telco data are relatively denser and enjoy a wider population coverage, which is desired in urban analysis. However, people’s lo- cations recorded in telco data are usually discretely determined by cell stations. In another word, data’s granularity highly depends on the distribution of cell stations in an area, which is a major draw- back of this type of data. To overcome the limitations, in our work, we choose to fuse data from multiple sources across time and space to help capture a full picture of people’s activities in an urban area.2.2 Region Segmentation MethodsRegion segmentation has been studied in the fields of GIS and urban planning for years. In most of previous work, the remote-sensing techniques were employed. For example, Deng et al. [7] and Seto et al. [28] conducted comparative analyses of satellite images of cities to classify regions based on land coverage. Puissant et al. [24] further examined spectral and textural approaches to improve the classification accuracy. All these techniques are based on visual differences of regions in satellite images, yet fail to provide fine- grained region segmentations of urban area, especially for modern cities nowadays with complex geomorphic environments.  There are also a few studies trying to conduct region segmenta- tion based on people’s activities. As early as 1970, Goddard [12] presented a case study on functional regions within central London using surveyed data of taxi flows. Based on many existing studies about people’s activities within a focal region [6][23][25], Yuan et al. [37] creatively proposed a technique to segment regions based on people’s movement. In particular, their algorithm detects com- muting patterns among regions via LDA, which is a topic modeling technique originally used for text analysis, and groups local districts sharing similar patterns together as a functional region. The analy- sis module of MobiSeg is inspired by this technique but overcomes three major limitations. First, although Yuan’s method can seg- ment an urban area based on commuting patterns among regions, it would be hard for users to understand or interpret segmentation re- sults without a prior knowledge of these regions. Yuan tried to pro- vide semantics of each region by inferring regional functions based on the number of different types of POIs in each region, while the number of POIs is not a region’s intrinsic representation. Although singular value decomposition (SVD) is applied, it does not tackle the problem thoroughly without considering the scale/size of POIs. In our system, instead of relying on the statistics of POI data, we employ different methods to segment regions based on a set of ex- tracted time-oriented mobility patterns, enabling analysts to lever- age their knowledge for a better interpretation. In addition, we use heterogeneous mobility data collected from multiple sources which can complement each other to ensure a comprehensive analysis. Second, in MobiSeg, based on advanced visualization designs and metric learning, analysts can adjust segmentation results and super- vise the underlying analysis procedure interactively which cannot be supported by Yuan’s work. Third, Yuan’s method produces static analysis results which can hardly be updated in real time, while our method enables flexible explorations of different time periods or areas via online region segmentation and dynamic result updating.2.3 Visualization of Mobility DataVisualization techniques of mobility data can be categorized into three major types [1], including direct depiction [15][29], sum- marization [14][33] and pattern extraction [41][42]. In particular, the direct depiction techniques present paths of movement directly, while summarization techniques present movement based on statis- tical calculations, whose basic idea is to aggregate movements after dividing spatial and temporal domains into space compartments and time intervals. Moreover, pattern extraction techniques support an intuitive discovery and analysis of various movement patterns. In this paper, we take advantage of different types of techniques to ad-
dress a challenging issue, dynamic region segmentation, which has not received much attention in the field of visualization.3 SYSTEM DESIGN AND OVERVIEWMobiSeg is a visual analytics system designed to segment an ur- ban area through a comprehensive analysis of patterns hidden in mobility data collected from multiple sources within urban context. It should divide regions where people have different patterns into different parts and enable a flexible exploration based on varying patterns during different time intervals. These general goals can be compiled into the following detailed technical requirements:T1. Data Fusion. The system should fuse heterogeneous mobility data from different sources to enhance the analysis reliability.T2. Feature Extraction. A set of features should be extracted to capture people’s activities properly and comprehensively.T3. Pattern Detection. Based on the extracted features, the sys- tem should be able to identify patterns to facilitate region seg- mentation by grouping local districts with similar patterns.T4. Result Interpretation. The system should assist analysts to better understand the semantics of segmentation results, so that they can efficiently leverage their domain knowledge and experience to address practical problems.T5. Dynamic Updating. A real-time interactive exploration should be enabled, allowing users to calibrate segmentation results and supervise underlying analyses.  With the above requirements in mind, we propose the system framework of MobiSeg as shown in Fig. 2. The system first di- vides the urban area into a set of small local districts and fuses the heterogeneous mobility data based on their innate spatial and tem- poral information (T1). Five mobility features, including staying and moving in/out a local district by metro or taxi, are then ex- tracted and defined as people’s activities (T2). After that, for each local district, dramatic changes of feature values are detected and the representative ones are ranked out as activity events. Then NMF is employed to find correlated activity events which are defined as activity patterns (T3). Finally, the system groups local districts sharing similar activity patterns together, thus forms activity re- gions as segmentation results. In the system, both activity regions and detected activity patterns are shown in visualization views to facilitate an intuitive result interpretation (T4). After data fusion and feature extraction, our system can run in real time, enabling a dynamic updating of analysis results. Based on metric learning and interactive visualizations, users can adjust the detected activity regions iteratively to supervise the analysis procedure (T5).4 REGION  SEGMENTATION  VIA  ACTIVITY  ANALYSISIn this section, we briefly describe five key steps for dividing an urban area into activity regions.4.1 Data FusionOur system integrates the following three types of mobility data:  Taxi data. Taxi data consist of a series of GPS records of over 10,000 taxis in Shanghai, China, with around 80 million records per day. Each sampling point of a trajectory contains a record of time, position (latitude and longitude) and status (occupied / vacant).Metro passenger RFID card data.   Metro passenger RFID
id, a timestamp, a cell station id and its corresponding location in the form of < longitude, latitude >. The data contain records of about 2.6 million users on 75,039 cell stations mapped to 10,118 unique locations covering most of the urban area.  In order to fuse these three types of data, we first partition an urban area into local districts. An effective partition should be able to preserve the distribution of data. Among different types of data described above, taxi data and metro data are generated based on transportation system (i.e., road and metro network), and their spa- tial coverage is limited, making them unsuitable for local district partition. In contrast, telco data, whose cell stations are usually placed according to the distribution of population, have a much bet- ter spatial coverage. Therefore, a natural approach is to cluster cell stations by spatial proximity, and use the centers of groups as seed points to compute a voronoi tessellation of the urban area. Here, we adopt a non-parametric clustering algorithm introduced by An- drienko et al. [2], which not only takes data density into account but also provides a flexible mechanism enabling a precise control of the spatial extend of a district. The resulting voronoi cells corre- spond to local districts, based on which the data fusion is conduced according to innate spatio-temporal relationships of these data, and generates a heterogeneous multidimensional dataset.4.2 Feature ExtractionThe feature extraction process condenses the complex data down to relevant information [19], consisting of two major steps.  We first calculate five raw features to capture people’s activities within each local district during a given time interval, which are summarized as follows:• Taxi-in / Taxi-out: measures the total number of people arrive at / depart from a local district during a time interval based on the number of taxi drop-offs / pick-ups recorded in taxi data.• Metro-in / Metro-out: measures the total number of people arrive at / depart from a local district during a time interval based on the number of passengers exit / enter the metro sta- tion (tap-out / tap-in action) recorded in metro data.• Telco-stay: measures the number of people stay at a local district during a time interval based on telco data.  Then we employ kernel density estimation (KDE) [31] to smooth the features to capture people’s activities more properly. In most of the case, the real starting point or final destination of a trip may be different from a taxi’s pick-up/drop-off point or a tap-in/tap-out metro station that we can obtain from a mobility dataset. Take the feature metro-in as an example, when people arrive at a metro sta- tion, they usually have to walk for some distance to get to the final destination. As suggested by the domain experts, this phenomenon should be taken into consideration for a more proper description of people’s activities. Thus, we employ KDE to estimate the impact of people who arrive at a metro station on the nearby local districts. The nearer the district to the metro station, the higher probability that people will go there after leaving from the metro station. The same holds for other three features (i.e. metro-out and taxi-in/out). Formally, given n points (i.e., pick-up/drop-off points of taxis or tap-in/tap-out stations of metro) p1, p2,..., pn, we estimate the in-tensity of the k-th feature (k = 1, 2, 3, 4) of the j-th district using a kernel density estimator, defined as:
card data (metro data for short) record passengers’ journeys in theShanghai metro system.  Passengers use their personalized RFID
λk ( j) =
1   n∑ K(
di j )
cards to tap on card readers at metro station entries to go in/out of stations. The card readers record every “tap in/out” action. Our data contain around 12 million records per day.  Telco data.  Telco data contain all data exchange records be- tween each mobile phone and cell station when mobile phone users
nh i=1	hwhere di j is the distance from pi to the j-th district, h is the band- width and K(·) is the kernel function whose value decays with the increasing of di j . In our case, the Gaussian kernel is selected:2
make calls, send messages or connect to the Internet. In this work,
di j	1K(	) =
di j
we extract useful information from each record of the telco datacollected in Shanghai, including an encrypted unique mobile phone
h	√2π exp(− 2h2 )where the bandwidth h is determined via MISE criterion [31].
Figure 2: System framework. After data fusion and feature extraction, MobiSeg can support interactive region segmentation in real-time.
  The final five features extracted at different time form a feature vector time-series, characterizing people’s activities over time.4.3 Activity Event DetectionIn this step, we first detect dramatic value changes of each feature over time through peak detection to capture major activities occur- ring in each local district and reduce the influences of data noises. Then we rank out the most representative ones as activity events to help categorize each district.  Among many peak detection techniques, we adopt the algorithm introduced in [20] which has a similar application scenario. In par- ticular, this algorithm first bins the mobility features of each local district into a histogram. A smaller bin size leads to a higher tempo- ral granularity but more influences by data noises. Thus, we choose 5 minutes in our implementation. After that, a sliding time window is used to calculate the change of data variance and mean over time, which helps to reveal peaks in the time series (one hour in our im- plementation to alleviate the influences of insignificant peaks and best fit the time scale of our analysis). The output is a series of seg- ments of time series recording the forming and releasing of peaks regarding to a specific mobility feature.  When applied to real datasets, tens of thousands of peaks are detected from different local districts in a day. Therefore, it is nec- essary to identify representative ones to differentiate each local dis- trict from others. To this end, we employ “Term Frequency - Inverse Document Frequency” (TF-IDF) [26] that is commonly used in text analysis, given the similarity of the problem to be solved. In partic- ular, TF-IDF reflects how important a word is for a document in a collection or corpus in terms of clearly differentiating the document from others. Specifically, a word having a high TF-IDF score in a document indicates it has and only has high frequencies in the focal document, thus can be used to characterize the document properly. A local district can also be characterized by the extracted peaks in a similar statistic approach. Here, the whole urban area can be re- garded as a document collection containing a set of local districts, which are treated as documents. In addition, a detected peak of a feature within a district corresponds to a word in a document. Based on this conceptual mapping, we are able to use TF-IDF to estimate the importance of each peak detected at a local district to help find out the most representative ones as activity events that best differ- entiate the district from others.  It is worth mentioning that unlike a word in a document, the frequency of a peak, recorded in a time-series, is difficult to be cal- culated given it is almost impossible to find out two peaks that are exactly the same. To address this issue, we employ dynamic time warping (DTW) [3] to estimate the similarity of peaks, which pro-vides a flexible matching within a predefined time window (± 15 minutes in our implementation to fit the time scale of our analysis).Then we cluster similar peaks together and use the mean curve of these peaks to replace the raw curves. The peak value of the mean curve indicates an average amount of people move in/out or stay at a local district, thus is used as the frequency for TF-IDF.4.4 
Latent Activity Pattern AnalysisActivity events capture the elementary semantics of people’s activ- ities in a local district such as a crowd flows in or out of the district at sometime. However, it is necessary to understand the correla- tions of these events, such as which events occur simultaneously or in sequence, so that a higher level of semantics of activities can be implied. For example, regular activity events, representing a large number of people flow into several local districts every morning and leave late in the afternoon, are likely to imply the function of related local districts (i.e., official blocks). Therefore, in this step, we detect such kinds of correlated activity events as latent activity patterns for an in-depth analysis.  Again, we analogize our problem to text analysis: the analysis of activity patterns based on activity events occurring in local dis- tricts is just like the analysis of topics based on words in documents. This analogy also brings an additional benefit that fits the reality of region segmentation for real world applications. It models com- plicated cases when multiple activity patterns occur simultaneously within the same district under different probability. Just like in topic analysis, a document may contain different topics. Here, we em- ploy NMF [35] to detect latent activity patterns due to its simplicity and high efficiency compared to traditional topic models such as LDA [4], which facilitates pattern interpretation and real-time inter- actions. In particular, we first formalize activity events in the focalurban area by an n × m event matrix A, where n is the total num- ber of local districts, m is the total number of activity events, and A(i, j) indicates the frequency of event j occurring in the local dis- trict i. Then A is decomposed into two matrices through NMF, i.e., A = W × H by minimizing the squared error (or Frobenius norm):min||A − W × H||2Here, W is an n × k matrix indicating the probability of k activity patterns occurring in each local district, where k is an input parame- ter controlling the number of latent activity patterns to be detected. Particularly, k can be estimated by a term-centric stability analysis strategy [13] or set by users for certain applications. H is a k × m matrix that describes each latent activity pattern based on m activity events. In another word, W captures the high-level semantics of ac- tivities in each local district based on latent activity patterns whose details can be interpreted by H.4.5 Local District ClusteringBased on W , we cluster local districts sharing similar activity pat- terns to form activity regions via metric learning [17] which es- timates the similarity between each pair of districts in the feature space. Specifically, we calculate the distance metric as follows:D(wi, wj ) = I wi − wj )T M(wi − wj )where wi is the i-th row of W indicating the i-th local district in the urban area. M is the mapping matrix which is learned by mini- mizing the distances between the districts within the same clusters (denoted by S), while separating the districts belonging to different
Figure 3: The user interface of MobiSeg with four major views: (a) Global Map View provides an overview of the entire mobility dataset for global exploration and enables flitering in both spatial and temporal domains; (b) Inspection View illustrates region segmentation results and support a general understanding of activities in these regions; (c) Detail View visualizes mobility feature vector time series of local districts for an in-depth investigation and comparison, and (d) Activity Pattern View facilitates interpretation of extracted latent activity patterns based on NMF.
clusters (denoted by D). Formally, M is learned by optimizing the following objective function:
geospatial and temporal information. Hence, analysts need a simple visualization view that is able to summarize data into an overview to help quickly capture the distribution of data.
s.t.
min  ∑(i, j)∈SM ≥ 0,  ∑(i, j)∈D
I wi − wj )T M(wi − wj )I wi − wj )T M(wi − wj ) ≥ 1  
R2. Supporting easy exploration and filtering of raw data. The number of records in the mobility data is in the scale of tens of millions. It will be helpful if the analysis scope can be reduced in advance. Therefore, it is important to design a flexible mechanism to help users explore raw data and retrieve their interested parts easily, thus enabling an efficient interactive online analysis.
  In our implementation, the activity regions are first calculated byclustering local districts based on Euclidean distance. The initial re- sult is then visualized and users can edit region boundaries to adjust the results based on their observations and judgements. Their revi- sions produce a set of constraints S and D which are then used in the metric learning procedure described above to refine the distancemetric D(wi, wj ) iteratively.5 USER  INTERFACE  AND  VISUALIZATION5.1 Design RationaleTo design the user interface and corresponding visualization views of MobiSeg, we conducted multiple design sessions with three do- main experts who have long-term experiences on analyzing urban data. Two of them are project managers in a big IT company, and the third is an analyst from an urban planning bureau in Shanghai, China. These experts also held regular meetings with end-users like urban planners and urban administrators. We discussed with these experts about demands in their work. The extensive discussions gradually led to a set of key design requirements as follows:  R1.  Showing the data overview.  The data used in our sys- tem is huge in amount, heterogeneous in nature, and contains both  
R3. Facilitating inter-region comparisons. Another key to un- derstand the formation of activity regions is the capability to dif- ferentiate regional activities. Hence, the system should facilitate an efficient comparison via a symbolic representation of activities.  R4. Interpreting activity patterns from different aspects. Having a comprehensive understanding of the semantics of activity patterns is important to interpret region segmentation results. Thus, the system should present extracted activity patterns to let analysts get a general idea of these patterns from different aspects, such as what activity events are contained, when they occurs, how long they last, and how significant they are.  R5. Enabling flexible adjustment of analysis results. The de- sign of visualization views and corresponding interactions should be carefully coordinated to enable an efficient adjustment of region segmentation results by collecting users’ feedbacks to supervise the underlying analysis procedure.5.2 User InterfaceAs shown in Fig. 3, the user interface of MobiSeg consists of four major coordinated views, including (1) the Global Map View illus- trating the urban area to be studied, the partition of local districts,
as well as the overall spatio-temporal distribution of activity events (R1), so as to guide users to choose a subset of data of their interest for further exploration (R2); (2) the Inspection View, a voronoi- based texture map, illustrating region segmentation results in a fo- cal area and supporting a general understanding of activities in these districts via elliptical glyphs (R3); (3) the Activity Pattern View fa- cilitating interpretation of latent activity patterns detected based on NMF (R4); and (4) the Detail View visualizing details of activities in a local district to facilitate an in-depth comparison (R3). These views are interactively linked, showing different activity context of the focal area for a comprehensive analysis (R5).5.2.1 Global Exploration and FilteringMobiSeg provides an overview of the entire mobility dataset through the Global Map View (Fig. 3(a)). It combines a map and a timeline plot together to support an efficient exploration and filter- ing of data from both spatial and temporal domains. In particular, in the timeline view, a stacked bar chart is employed to visually sum- marize the varying number of activity events of different types (i.e., metro-in/out, taxi-in/out, and telco-stay) in the urban area overtime, which provides an intuitive visual guide for filtering of data by time (e.g., 8-9 am). Our system also allows users to make a linear time selection of days (e.g., Monday). In addition, the map not only shows the geo-information of the focal area, but also presents the local districts that are generated as described in Section 4.1. These local districts are hidden in the map by default to ensure a clear presentation of spatial context such as the labels of different roads. Moreover, users can further activate a heatmap layer which shows the spatial distribution of activity events. Based on the information provided, users can brush to choose an area on the map, then the corresponding local districts will be highlighted and corresponding data will be loaded for further exploration.5.2.2 Inspecting Segmentation ResultAfter global exploration and filtering, MobiSeg enables a closer inspection of the focal area selected by users through two views, namely the Inspection View and Detail View. These two views vi- sualize region segmentation results and illustrate regional activities to offer an intuitive understanding and interpretation. Specifically, as shown in Fig. 3(b), the Inspection View displays a voronoi-based texture map where each voronoi cell represents a local district. A stacked elliptical glyph embedded in each cell summarizes people’s activities of five types, which forms a texture and enables a fast comparison across different local districts.  An activity region, as a cluster of local districts sharing similar activity patterns, is thus visualized as a set of voronoi cells through the Inspection View. Furthermore, the Detail View (Fig. 3(c)) shows activities in a cer- tain district by visualizing the feature vector time-series extracted in Section 4.2 and facilitates a detailed comparative analysis. The visualization techniques are described as follows:(I) Visualizing Regional Activities  To understand segmentation results, we present people’s activi- ties in each local district. Two approaches are provided to visualize regional activities at different scales.  Activity Glyph. First, an activity glyph is embedded in the In- spection View to support a general understanding and comparison of activities in different local districts by visualizing corresponding feature values. Our first prototype is implemented using tiny bar charts. Although the simplicity makes it easier for interpretation, the limited size undermines the efficacy of this design. Thus, we come up with a stacked elliptical glyph design in which each eclipse encodes two related features from the same data source respectively via eclipse’s two axes. Specifically, as shown in Fig. 4, we encode “taxi-in” and “taxi-out” in one ellipse and “metro-in” and “metro- out” in another ellipse with one axis (called in-axis) showing the total number of “in” activities and the other axis (called out-axis)
Figure 4: Activity glyph, a stacked elliptical glyph design, embedded in the Inspection View to support a general understanding and com- parison of activities in different local districts.showing the total number of “out” activities. The feature value of “telco-stay” is shown in the third ellipse with both two axes show- ing the same value (as there is only one feature extracted from this source), thus making it a circle. The color intensity of each ellipse encodes the difference between its two axes which is normalized tothe range of [0, 1]. These ellipses are stacked together forming an integrated elliptical glyph. Here, to facilitate an intuitive compari-son through shape, we put the circular one, i.e., the one represents “telco-stay” in the middle, wrapped by the elliptical ones layer by layer. The orientation of the glyph indicating by a white pointer in the middle, encodes the angle distance between the glyph’s feature vector and the mean feature vector across the entire focal area. Note that the pointer is aligned along the “in-axis”. Thus, by observing the directions indicated by pointers , users can compare the similar- ity of activities in local districts intuitively. In summary, the shape and size of the glyph enable a general understanding of activities in a number of local districts, while users can zoom in to observe other features of glyph for an in-depth comparison. Note that, when users zoom in, a white border of each ellipse will be evoked to help diifferentiate ellipses of three data sources.  Detail View. MobiSeg further integrates a Detail View to show feature vector time series extracted in a certain local district, which provides low-level information for users to validate the results and conduct a detailed comparative analysis. In this design, we employ a circular time axis for an intuitive visual metaphor. Moreover, to show the time series, we adopt horizon graph, a timeline visualiza- tion technique shown to be effective in a limited space [16][27]. In particular, as shown in Fig. 5, the time series of each feature is vi- sualized as a horizon-graph along the circular time axis, illustrating changes of feature values over time in a clock-wise order. Each ex- tracted peak representing an activity event is marked by an arc (in- dicating its time range) and a small circle (showing the peak point). Based on this design, when users click on a cell of the texture map in the Inspection View, representing a local district, a series of cir- cular horizon graphs will be generated in the Detail View. When multiple cells are selected, corresponding horizon-graphs will beFigure 5: The Detail View visualizes feature vector time series ex- tracted in a certain local district through a series of circular horizon graphs to facilitate detailed analysis and comparison.
visualized in a grid (Fig. 3(c)), facilitating a pair-wise compari- son. Horizon graphs can also be transformed into a circular stacked graph, so that users can easily compare different local districts via their shapes. However, this circular design suffers difficulties when comparing inner and outer segments. We further discussed with our domain experts. Based on their feedbacks, they like the circu- lar design due to its compactness and capability to serve as a more aesthetic visual signature of each local district for a wide audience. Meanwhile, they acknowledge the drawback, thus our system en- ables users to switch to a horizontal time axis for fair comparisons.(II) Visualizing Local District  In order to enable a closer investigation and interpretation of seg- mentation results, we adopt a composite design (i.e., an activity glyph embedded in each voronoi cell) to show people’s activities within each local district. To facilitate comparisons, we employ the centroid voronoi tessellation to produce voronoi cells with an ap- proximately equal size, so that activity glyphs can be visualized at the same scale. Meanwhile, the relative positions of voronoi cells should be preserved in the Inspection View so that users can ob- serve the original voronoi tessellation in the Global Map View side by side to be aware of the spatial context. Here, we adopt an al- gorithm introduced in [9], whose basic idea is to iteratively place the seed of each voronoi cell into the center of mass and recom- pute the tessellation based on new positions until all seeds are sta- bilized. Although changed gradually, this layout procedure may break the original structure of local districts, making the previously connected districts disconnected, thus producing a misleading view. To tackle this problem, we optimize the following objective func- tion while computing the centroid voronoi tessellation:min ∑α||Xi − Ci||2 + (1 − α)||Xi − X t||2where Xi is the screen coordinates of a seed, Ci is the center of mass of the corresponding cell at the current iteration, and X t is theoriginal position of the seed defined by the center of the cell station cluster before optimization. The first term in the objective tries to place a seed to the center of mass and the second term tries to preserve the original structure. α ∈ (0, 1) is a parameter balancingbetween these two terms. We found set α = 0.8 gave the best resultsin our implementation.(III) Visualizing Activity Regions  An activity region can be presented as a set of connected voronoi cells on the texture map in the Inspection View. To differentiate an activity region from others, we strengthen the boundary of corre- sponding voronoi cells. Beyond a single activity region, those activ- ity regions with similar activity patterns also need to be identified. Thus, background colors are utilized to visually categorize them.5.2.3 Interpreting Latent Activity PatternTo enable a high-level interpretation of the region segmentation re- sults, analysts want to have a comprehensive understanding of the semantics of activity patterns so as to make further adjustment ac- cordingly. As described in Section 4.4, activity patterns can be de-Figure 6: Event glyph design with trapezoid-metaphor to visualize feature peaks representing activity events of latent activity patterns.
scribed by sequences of activity events as calculated in the matrix H based on NMF. Therefore, we propose the design of the Activ- ity Pattern View in the form of a matrix to sort all these sequences into a linear order, enabling a convenient exploration. As shown in Fig. 3(d), the rows of the matrix correspond to sequences of ac- tivity events representing different latent activity patterns, while the columns correspond to activity events at different time inter- val. Each activity event, as described in Section 4.3, is the aver- age of a cluster of similar feature peaks. Instead of showing orig- inal curves directly, we visualize each activity event based on a trapezoid-metaphor (Fig. 6) to facilitate an easier comparison by encoding statistical information of the corresponding peak cluster on an event glyph. Particularly, the bottom width and height of glyph are proportional to the width and height of the original peak. The top width of the glyph is controlled by a parameter α that in- dicates the significance of the peak (i.e., peakness) ranging from 0 (the least significant) to 1 (the most significant). The center posi- tion of the top edge encodes the skewness S of the underlying time series curves. Color intensity is further used to encode the probabil- ity of the event’s occurrence in each pattern, corresponding to the value in matrix H.5.3   InteractionsWe provide users with rich interactions to navigate through data for a comprehensive analysis. Besides typical interactions like filtering and brushing, MobiSeg also supports the following interactions:  Configuration: Users can configure our system to choose fea- tures as well as parameters for region segmentation, and switch be- tween alternative designs to support different analytical tasks.  Linking: The system supports automatic linking among the four proposed views for an in-depth analysis. For example, if users dou- ble click a voronoi cell of interest in the Inspection View, the related activity patterns will be ordered according to their relevance to the corresponding local district and shown in the Activity Pattern View. Zooming and Panning: Zooming and panning are supported in the Global Map View, Inspection View and Activity Pattern View to explore a large set of data items.  For example, in some cases, due to the large number of activities occurring during a short time, there might be overlaps among event glyphs in the Activity Pattern View, then users can scroll the mouse wheel to zoom and drag the mouse to pan so as to have a closer look of different activity events. Snapshot:  To facilitate a convenient comparison, a snapshot function is provided in the Inspection View and a clipboard is shown on the right side to record.  By hovering over a clipboard box, the snapshot will be magnified, thus enabling users to browsetheir previous findings and make further comparisons easily.  Adjusting: Functionality is provided for adjusting segmentation results in the Inspection View. Users can add or eliminate bound- aries to adjust the coverage of an activity region and the overall clustering result will be updated based on metric learning.6 EVALUATIONTo evaluate the effectiveness and usefulness of MobiSeg, we con- duct in-depth interviews with four domain experts invited by our collaborators, including two senior R&D engineers from the re- search department of a big IT company (Expert A and B) and two analysts from an urban planning bureau in Shanghai (Expert C and D). In this section, we first describe two use cases developed based on the interviews, and then report their comments on MobiSeg.6.1 Case StudiesFrom the discussions with our domain experts, we derived several using scenarios. In this section, we take two representative use cases as examples to demonstrate how MobiSeg can help analysts explore activity regions of a city and deal with various analytical tasks. The mobility datasets we used here include taxi data, metro
passenger RFID card data and telco data collected on April 5-6, 2015 in Shanghai, China. The data fusion and feature extraction take about 2.4 hours, then our system can run in real time.6.1.1 Region Segmentation of Pudong New AreaExpert C from an urban planning bureau in Shanghai participated in the first case study and attempted to use MobiSeg for interactive region segmentation to explore activity regions formed in Shanghai during on different days (i.e., April 5(Sunday) and 6 (Monday)). Based on the Global Map View, Expert C first chose 8-10 am on April 6 which were morning peak hours on Monday with more ac- tivity events. Then the heat map layer was activated and Expert C further brushed an urban area covering the main part of Pudong New Area (Fig. 1(h)). An initial segmentation result was generated in the Inspection View (Fig. 7a). Based on his prior knowledge on the local district highlighted with a black arrow in Fig. 7a, Expert C merged it into the nearby pink region, then the whole segmentation result were updated (Fig. 7b). Then the brown region embedded in the pink region (highlighted with a black circle in Fig. 7b) caught his attention. After a side-by-side observation of that region in the Global Map View and Inspection View, Expert C decided to merge it into the pink region as well. In this way, Expert C finally got a satisfied region segmentation result as shown in Fig. 1(a). In this result, a large region in pink (marked with a1) and two small re- gions in yellow (marked with a2 and a3) can be observed. All three regions contain large activity glyphs indicating more activities in these regions, which he found worth further exploration. Mean- while, Region a2 and a3 are in the same color and embedded with glyphs of similar shapes and orientations, indicating they share sim- ilar activity patterns. By observing the shape of elliptical activity glyphs, he found those glyphs in Region a1 have a longer “in-axis”, meaning that more people arrived in this region during morning peak hours on Monday. In contrast, those glyphs in Region a2 and a3 have a quite different shape with a longer “out-axis”, indicating more people left during that time period. Thus he inferred that Re- gion a1 was likely to be an official block, while Region a2 and a3 were probably residential areas.Figure 7: Adjustment of segmentation results for 8-10 am on April 6.  For further analysis, Expert C changed the time period to 6- 8 pm on Monday and applied a similar analyzing process. Fig. 1(b) shows the newly generated segmentation result. In addition to Re- gion b2 and b3 corresponding to Region a2 and a3 in the morning, he found that Region a1 split into two parts (marked with b1 and b4). By observing the shape of activity glyphs, he was surprised to find there were still more people arrived in Region b1 during 6- 8 pm on Monday, while people started to leave Region b4 during that time period. Thus, Expert C further inferred there might be shopping malls in Region b1 where people went for dinner. To val- idate this hypothesis, another segmentation result (Fig. 1(c)) of the same area was generated for a time period of 12-2 pm on Sunday (April 5). Region c1 corresponding to Region b1 in the previous segmentation result was immediately identified with activity glyphs of similar shape and dark color, indicating more people arrived in this region, while Region b4 almost disappeared. These observa- tions confirmed his hypothesis that Region b1 and b4 form a CBD in Pudong New Area with shopping malls located in Region b1.  
Finally, these results were compared with Baidu Street View 1, which we contend as a form of ground truth. We show a few street views in Region b1, b4, b2 and b3, corresponding to shopping malls (Fig. 1(d)), office buildings (Fig. 1(f)) and two residential areas (Fig. 1(e)(g)), which verified Expert C’s analysis.6.1.2 Use Case: Facilitate MarketingIn this use case, we demonstrate how users can use MobiSeg to deal with analytical tasks in real world applications. As suggested by Expert A and B, we applied our system to a task to facilitate marketing, which was an application scenario our domain experts worked on recently. Specifically, they were working for the mar- keting department of a start-up company in Shanghai whose major products were smart bicycles. The company would like to adver- tise their products and encourage green commuting through road shows, but only had a limited amount of funding. Therefore, our experts should help the marketing team to selectively spend money at proper places and at proper time to attract the most attention. To this end, our experts tried to use MobiSeg to help them understand the dynamics of activity patterns at different places, so as to decide when and where the road shows should be arranged.  After loading the mobility data of Shanghai into the system, they queried to analyze people’s activities in a downtown area of Shang- hai on a weekday (i.e., Monday, April 6). The system automatically identified and illustrated latent activity patterns in the Activity Pat- tern View. For a more targeted advertising, the experts explored the extracted activity patterns and investigated detailed activity events at different time, so as to choose those patterns implying potential customers of their smart bicycles. Their criteria of selection are as follows: 1) Patterns with more activity events are wanted indicat- ing regions with more active people who tend to travel in the city rather than stay at a fixed place; 2) Among five types of activity events, patterns with more “taxi-in” and “taxi-out” are preferred, which are likely to imply deficiencies of public transportation in such regions, thus smart bicycles would be needed. Based on these two criteria, they deliberately chose five patterns with more taxi related activity events (indicated by red and orange event glyphs in Fig. 8) whose occurring time was relatively staggered, in order to leave enough preparation time for road shows at different places. Those red and orange event glyphs were with high color opacity, in- dicating high probabilities of such events’ occurrence. In addition, another reason for the experts choosing these patterns was due to their interpretability, as they thought patterns with semantics were more reliable. In particular, as shown in Fig. 8, pattern 0 and 2 im- ply commuting activities by taxis during morning and evening peak hours, while pattern 3 and 4 imply entertaining activities by taxis after work in the evening, and pattern 1 implies activities during lunch break. Based on the chosen patterns, the segmentation results were updated in the Inspection View (Fig. 3(b)). Five types of re- gions (i.e., clusters of local districts) were generated and shown in different colors. By observing the embedded activity glyphs, they found pink and green regions with small glyphs indicating less ac- tivities in those regions. Thus, they focused on regions in other three colors and picked three districts with relatively large activity glyphs as candidates (b1, b2 and b3 in Fig. 3(b)).  After that, the experts wanted to see detailed features to under- stand activities in these three candidate districts and fix specific time for road shows.  Thus, by clicking on the corresponding voronoi cells in the Inspection View, the Detail View for each cell was gen- erated respectively (c1 for b1, c2 for b2, c3 for b3).  By observ- ing the red and orange horizon graphs in Fig. 3(c1-c3), obvious peaks for taxi-in (red) and taxi-out (orange) can be found in dif- ferent time period (marked by black boxes). In specific, the peaks    1The street view service of Baidu Maps (map.baidu.com) is a map ser- vice in China similar to Google Street View.
Figure 8: Visualization of five selected activity patterns with more taxi related activity events (indicated by red and orange event glyphs) to faciitate marketing for a start-up company. The color opacity of the event glyph indicates the probability of an event’s occurrence in each pattern.
during morning and evening peak hours in Fig. 3(c1) indicate Dis- trict b1 is likely to be an official block, while the peaks during 11 am-2 pm (Fig. 3(c2)) and 6 pm-10 pm (Fig. 3(c3)) indicate District b2 and b3 are likely to be popular places for lunch break and enter- tainment after work. By interacting with map, the experts further verified that District b1 is Caohejin High-Tech Park, a well-known official block in east Shanghai. Meanwhile, in District b2 and b3, they found Kerry Parkside and IKEA, two shopping malls, which may explain the activities in these two districts.  Finally, based on the knowledge obtained in MobiSeg, the ex- perts made a road show plan for the company which smartly ad- vertised their products at three places (District b1, b2 and b3) and during three time periods (8am-10am, 12am-2pm, and 6pm-8pm) to make sure their advertisement is always shown in a place with a large number of potential customers and pursuit the best revenue.6.2 Expert FeedbackVisual Design:   The domain experts confirmed that our system is well designed and user friendly, mentioning that the visualiza- tions were aesthetically pleasing and interactions were smooth. In particular, the experts were fond of the composite design of the voronoi-based texture map in the Inspection View. Expert A was interested in the voronoi layout and commented that “Presenting [mobility] features as a glyph in a centroid voronoi grid while pre- serving the spatial context is a smart idea as it facilitates a quick comparison”. Expert B added “In the Inspection View, I can clearly see the overall distribution of activity regions in an urban area and easily interpret it with aggregated mobility features encoded in ac- tivity glyphs”. He also appreciated the event glyph design in the Activity Pattern View and thought it to be intuitive. Besides, the experts also acknowledged the usefulness of the Global Map View and Detail View. Expert D commented that the Global Map View can provide a quick overview of data, and the Detail View enables an in-depth investigation.Comparison with Previous Work: We asked Expert B, C and D to further compare our method with previous work [37]; they were familiar with both of our method and Yuan’s. Expert C and D ap- preciated MobiSeg as a pioneering study for exploring the potential of using heterogeneous mobility data to monitor the dynamics of a city and measure the structure of urban spaces. Expert C high- lighted “By combining intuitive visualization with advanced ana- lytical methods, MobiSeg provides a powerful tool for exploring data and supervising the analysis process. [...] We feel more com- fortable and confident about the results obtained from MobiSeg”. Moreover, Expert B believed that a major advantage of MobiSeg is its capability of extracting interpretable activity patterns and show- ing them side-by-side with the segmentation results as “it helps to illustrate what are the underlying patterns behind the model”. He also mentioned “By selecting patterns of interest, users can, to some extent, filter out noises and improve the segmentation results for certain applications”. Lastly, compared with previous work, the experts particularly appreciated the interactive analysis method supported by MobiSeg. Expert C said “Enabling iterative adjust- ment of the initial segmentation result generated by automated al- gorithms offers a flexible method to take full use of our domain knowledge, which is always desired in our work”.  He hoped this
method could be extended to other studies.Improvements: Both Expert B and C mentioned that as the vi- sualization incorporated a lot of information of people’s activities through carefully designed glyphs, there would be a bit of learning curve at the beginning to get familiar with all the views. However, they both agreed that “Once you get used to it, the tool is very effi- cient and provides a compact information representation for a com- prehensive analysis”. Expert C added “In addition to peaks, valleys of feature vector time-series may also be informative and could be considered for characterizing regional activity patterns”. Expert D said “In addtion to move-in/out and stay, MobiSeg could take the in- formation of origin and destination of people’s movement into con- sideration, which could help further improve the analysis”. He also suggested “By analyzing a dataset covering a longer time span and even integrating other information (e.g., social media data), Mo- biSeg has a great potential to further explore the regional structure of urban spaces for more advanced applications”.7 CONCLUSION AND FUTURE WORKThis paper presents a visual analytics system, MobiSeg, to inves- tigate people’s activity patterns for an interactive region segmenta- tion based on heterogeneous mobility data. First, we derive a set of features that characterizes people’s activities in each local dis- trict. After that, an NMF-based method is introduced to capture latent activity patterns, then we segment an urban area into activ- ity regions and enable analysts to interactively adjust segmentation results based on metric learning so as to make full use of their do- main knowledge. Case studies and expert interviews demonstrate the usefulness of our system.  Our work is still in progress. In the future, we intend to further improve from the following aspects. First, for dealing with het- erogeneous mobility data, there might be noises, mismatches and conflicts between different datasets. We would like to extend our method to investigate implicit relationships among multiple data sources so as to capture activity patterns more precisely and im- prove the robustness of our system. Second, our system will be faced with scalability issues when the data grow. For example, when dealing with many different types of data, it will be diffi- cult to differentiate each layer of the activity glyph. Meanwhile, we use color intensity in the activity glyph to encode the difference be- tween “in” and “out” activities, but users can only distinguish a few color intensities efficiently. In these cases, more levels of detail and abstraction should be introduced to cope with this problem. Ad- ditionally, in our current system, several parameters (e.g., bin size, sliding-window size for activity event detection) are chosen based on suggestions from domain experts. In the future, MobiSeg can be extended to support an interactive configuration of parameters by users, enabling more flexible explorations for various applications. Besides, in this work, we focus on the design of visual analytics framework and visualizations to support interactive region segmen- tation based on heterogeneous mobility data. It is our plan to inves- tigate more advanced algorithms (e.g., algorithms for peak detec- tion, topic extractions and centroid Voronoi tessellation) to further improve our system for a better region segmentation. Furthermore, our method requires user’s adjustments based on initial results to generate a satisfactory segmentation. Nonetheless, according to ex-
perts’ feedbacks, the initial results could provide a good start point for them to leverage their domain knowledge and reach a satisfac- tory result within a few minutes. Finally, we also intend to make an in-depth comparison with previous work and conduct controlled experiments with quantitative measurements to collect more feed- backs from end users for further improvement.ACKNOWLEDGEMENTSThe authors thank the anonymous reviewers for their valuable com- ments. This research was supported in part by HK RGC GRF 16241916, Macao FDCT Grant 149/2016/A, University of Macau Grant SRG2015-00050-FST, National Key Basic R&D Program of China (973) Grant 2014CB340303, NSFC Grant 61602306, and the IBM SUR Award. Nan Cao is the contact author.REFERENCES[1] G. Andrienko, N. Andrienko, P. Bak, D. Keim, and S. Wrobel. Visual analytics of movement. Springer Science & Business Media, 2013.[2] N. Andrienko and G. Andrienko. Spatial generalization and aggrega- tion of massive movement data. IEEE TVCG, 17(2):205–219, 2011.[3] D. J. Berndt and J. Clifford. Using dynamic time warping to find patterns in time series.  In KDD workshop, volume 10, pages 359–370. Seattle, WA, 1994.[4]  D. M. Blei, A. Y. Ng, and M. I. Jordan.  Latent dirichlet allocation.    JMLR The Journal of machine Learning research, 3:993–1022, 2003. [5]  S. Chen, X. Yuan, Z. Wang, C. Guo, J. Liang, Z. Wang, X. Zhang, and J. Zhang.  Interactive visual discovering of movement patterns from sparsely sampled geo-tagged social media data.  IEEE TVCG,22(1):270–279, 2016.[6] J. Cranshaw, R. Schwartz, J. I. Hong, and N. Sadeh. The livehoods project: Utilizing social media to understand the dynamics of a city. In AAAI Conference on Weblogs and Social Media, page 58, 2012.[7] J. Deng, K. Wang, Y. Hong, and J. Qi. Spatio-temporal dynamics and evolution of land use change and landscape pattern in response to rapid urbanization. Landscape and urban planning, 92(3):187–198, 2009.[8] G. Di Lorenzo, M. Sbodio, F. Calabrese, M. Berlingerio, F. Pinelli, and R. Nair. Allaboard: visual exploration of cellphone mobility data to optimise public transport. IEEE TVCG, 22(2):1036–1050, 2016.[9] Q. Du, V. Faber, and M. Gunzburger. Centroidal voronoi tessellations: applications and algorithms. SIAM review, 41(4):637–676, 1999.[10] N. Ferreira, J. T. Klosowski, C. E. Scheidegger, and C. T. Silva. Vector field k-means: Clustering trajectories by fitting multiple vector fields. In Computer Graphics Forum, volume 32, pages 201–210, 2013.[11] N. Ferreira, J. Poco, H. T. Vo, J. Freire, and C. T. Silva. Visual ex- ploration of big spatio-temporal urban data: A study of new york city taxi trips. IEEE TVCG, 19(12):2149–2158, 2013.[12] J. B. Goddard. Functional regions within the city centre: A study by factor analysis of taxi flows in central london. JSTOR TIBG, pages 161–182, 1970.[13] D. Greene, D. OCallaghan, and P. Cunningham. How many topics? stability analysis for topic models. In Joint European Conference on Machine Learning and Knowledge Discovery in Databases, pages 498–513. Springer, 2014.[14] D. Guo and X. Zhu. Origin-destination flow data smoothing and map- ping. IEEE TVCG, 20(12):2043–2052, 2014.[15] H. Guo, Z. Wang, B. Yu, H. Zhao, and X. Yuan. Tripvista: Triple per- spective visual trajectory analytics and its application on microscopic traffic data at a road intersection. In IEEE PacificVis, pages 163–170, 2011.[16] J. Heer, N. Kong, and M. Agrawala. Sizing the horizon: the effects of chart size and layering on the graphical perception of time series visualizations. In ACM SIGCHI, pages 1303–1312, 2009.[17] B. Kulis. Metric learning: A survey. Foundations and Trends in Ma- chine Learning, 5(4):287–364, 2012.[18] H. Liu, Y. Gao, L. Lu, S. Liu, H. Qu, and L. M. Ni. Visual analysis of route diversity. In IEEE VAST, pages 171–180, 2011.[19] M. Luboschik, M. Ro¨hlig, A. T. Bittig, N. Andrienko, H. Schumann, and C. Tominski. Feature-driven visual analytics of chaotic parameter-
dependent movement. In Computer Graphics Forum, volume 34, pages 421–430. Wiley Online Library, 2015.[20]  A. Marcus, M. S. Bernstein, O. Badar, D. R. Karger, S. Madden, andR. C. Miller. Twitinfo: aggregating and visualizing microblogs for event exploration. In ACM SIGCHI, pages 227–236, 2011.[21] A. H. Meghdadi and P. Irani. Interactive exploration of surveillance video through action shot summarization and trajectory visualization. IEEE TVCG, 19(12):2119–2128, 2013.[22] C. Palomo, Z. Guo, C. T. Silva, and J. Freire. Visually exploring transportation schedules. IEEE TVCG, 22(1):170–179, 2016.[23] G. Pan, G. Qi, Z. Wu, D. Zhang, and S. Li. Land-use classification using taxi gps traces. IEEE TITS, 14(1):113–123, 2013.[24] A. Puissant, J. Hirsch, and C. Weber. The utility of texture analysis to improve per-pixel classification for high to very high spatial resolution imagery. International Journal of Remote Sensing, 26(4):733–745, 2005.[25] G. Qi, X. Li, S. Li, G. Pan, Z. Wang, and D. Zhang. Measuring social functions of city regions from large-scale taxi behaviors. In IEEE PERCOM Workshops, pages 384–388, 2011.[26] A. Rajaraman and J. D. Ullman. Data mining. In Mining of Massive Datasets, pages 1–17. Cambridge University Press, 2011. Cambridge Books Online.[27]  T. Saito, H. N. Miyamura, M. Yamamoto, H. Saito, Y. Hoshiya, andT. Kaseda. Two-tone pseudo coloring: Compact visualization for one- dimensional data. In IEEE Symposium on Information Visualization, 2005. INFOVIS 2005., pages 173–180. IEEE, 2005.[28] K. C. Seto and M. Fragkias. Quantifying spatiotemporal patterns of urban land-use change in four cities of china with time series land- scape metrics. Landscape ecology, 20(7):871–888, 2005.[29] C. Tominski, H. Schumann, G. Andrienko, and N. Andrienko. Stacking-based visualization of trajectory attribute data. IEEE TVCG, 18(12):2565–2574, 2012.[30] T. von Landesberger, F. Brodkorb, P. Roskosch, N. Andrienko, G. An- drienko, and A. Kerren. Mobilitygraphs: Visual analysis of mass mobility dynamics via spatio-temporal graphs and clustering. IEEE TVCG, 22(1):11–20, 2016.[31]  M. P. Wand and M. C. Jones. Kernel smoothing. CRC Press, 1994. [32]  Z. Wang, M. Lu, X. Yuan, J. Zhang, and H. Van De Wetering.  Vi-sual traffic jam analysis based on trajectory data. IEEE TVCG, 19(12):2159–2168, 2013.[33] W. Wu, J. Xu, H. Zeng, Y. Zheng, H. Qu, B. Ni, M. Yuan, and L. M. Ni. Telcovis: Visual exploration of co-occurrence in urban human mobility based on telco data. IEEE TVCG, 22(1):935–944, 2016.[34] W. Wu, Y. Zheng, H. Qu, W. Chen, E. Groller, and L. M. Ni. Bound- aryseer: Visual analysis of 2d boundary changes. In IEEE VAST, pages 143–152, 2014.[35] W. Xu, X. Liu, and Y. Gong. Document clustering based on non- negative matrix factorization. In ACM SIGIR, pages 267–273, 2003.[36]  L. Yu, W. Wu, X. Li, G. Li, W. S. Ng, S.-K. Ng, Z. Huang, A. Arunan,and H. M. Watt. iviztrans: Interactive visual learning for home and work place detection from massive public transportation data. In IEEE VAST, pages 49–56, 2015.[37] N. J. Yuan, Y. Zheng, X. Xie, Y. Wang, K. Zheng, and H. Xiong. Discovering urban functional zones using latent activity trajectories. IEEE TKDE, 27(3):712–725, 2015.[38] W. Zeng, C.-W. Fu, S. M. Arisona, and H. Qu. Visualizing interchange patterns in massive movement data. In Computer Graphics Forum, volume 32, pages 271–280, 2013.[39] Y. Zheng, L. Capra, O. Wolfson, and H. Yang. Urban computing: concepts, methodologies, and applications. ACM TIST, 5(3):38, 2014.[40] Y. Zheng, W. Wu, Y. Chen, H. Qu, and L. M. Ni. Visual analytics in urban computing: An overview. IEEE Transactions on Big Data, 2(3):276–296, 2016.[41] Y. Zheng, W. Wu, H. Qu, C. Ma, and L. M. Ni. Visual analysis of bi-directional movement behavior. In IEEE Big Data, pages 581–590, 2015.[42]  Y. Zheng, W. Wu, H. Zeng, N. Cao, H. Qu, M. Yuan, J. Zeng, andL. M. Ni. Telcoflow: Visual exploration of collective behaviors based on telco data. In IEEE Big Data, 2016.